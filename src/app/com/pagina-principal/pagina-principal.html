<div class="navbar">
  <app-sidenavbar></app-sidenavbar>
</div>

<div class="profesores">
  <div class="imagen-profes">
    <img src="/imgs/profes.jpg" alt="#" />
  </div>
  <div class="frase-inspiradora">
    <hr class="frase-esparador" />
    <p class="texto-frase">
      “Haz lo mejor que puedas hasta que sepas mejor. Luego, cuando sepas más, hazlo mejor.” — Maya
      Angelou
    </p>
  </div>
  <div class="titulo-pagina">
    <h1>Profesores:</h1>
  </div>
  <div class="contenedor-busqueda">
    <div class="profes-aviso">
      <p>• En esta tabla puedes buscar el nombre del profesor.</p>
      <p>• Para facilitar la búsqueda puedes ingresar el nombre del profesor.</p>
    </div>
    <div class="buscar-profesor">
      <form class="d-flex" role="search" (submit)="buscarProfesor()">
        <input
          class="form-control me-2"
          type="search"
          placeholder="Buscar"
          [(ngModel)]="busquedaProfesor"
          aria-label=""
          name="busqueda"
        />
        <button class="btn btn-outline-success" type="submit">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
      </form>
    </div>
  </div>
  <div class="titulo-pagina">
    <h1>Adicionales:</h1>
    <p>Criterios de búsqueda adicionales</p>
  </div>
  <div class="items-busqueda">
    <div class="item-busqueda">
      <h1>Grado investigador</h1>
      <select class="dropdown-item" [(ngModel)]="gradoInvestigador" (change)="filtarProfesores()">
        <option value="">Selecciona...</option>
        <option value="nacional">Candidato a Investigador Nacional</option>
        <option value="nivel1">Nivel I</option>
        <option value="nivel11">Nivel II</option>
        <option value="nivel111">Nivel III</option>
        <option value="emerito">Investigador Nacional Emérito</option>
      </select>
    </div>
    <div class="item-busqueda">
      <h1>No. incidencias</h1>
      <select class="dropdown-item" [(ngModel)]="incidencias" (change)="filtarProfesores()">
        <option value="">Selecciona...</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="+5">+5</option>
      </select>
    </div>
    <div class="item-busqueda">
      <h1>Satisfacción académica</h1>
      <select class="dropdown-item" [(ngModel)]="satisfaccion" (change)="filtarProfesores()">
        <option value="">Selecciona...</option>
        <option value="0-20">0-20</option>
        <option value="20-40">20-40</option>
        <option value="40-60">40-60</option>
        <option value="60-80">60-80</option>
        <option value="80-100">80-100</option>
      </select>
    </div>
    <div class="item-busqueda">
      <h1>Academia</h1>
      <select class="dropdown-item" [(ngModel)]="academia" (change)="filtarProfesores()">
        <option value="" class="color">Selecciona...</option>
        <option class="color" *ngFor="let a of academias" [value]="a.name">
          {{ a.name }}
        </option>
      </select>
    </div>
  </div>

  <div class="contenedor-general">
    <div class="contenedor-profesores">
      <div class="centro-blanco">
        <table class="tabla-centro">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>ID</th>
              <th>Academia</th>
              <th>Satisfacción académica</th>
              <th>Grado investigador</th>
              <th>No. de incidenias</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let prof of ProfesoresFiltrados">
              <td>{{ prof.Nombre }}</td>
              <td>{{ prof.ID }}</td>
              <td>{{ prof.Academia }}</td>
              <td>{{ prof.Satisfaccion_academica }}</td>
              <td>{{ prof.Nivel_de_estudios || 'Ninguno' }}</td>
              <td>{{ prof.Numero_de_incidencias }}</td>
              <td><button class="boton" (click)="abrirModal(prof)">Reportes</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <hr class="frase-esparador" />
  <div class="componente">
    <app-agregar-profesor (profesorAgregado)="loadProfesores()"></app-agregar-profesor>
  </div>
</div>

<div class="modal fade" id="miModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Reportes</h5>
        <button type="button" class="boton" data-bs-dismiss="modal" aria-label="Close">
          <i class="fa-solid fa-x"></i>
        </button>
      </div>

      <div class="modal-body">
        <div class="datos-profesor">
          <div class="usuario-fake">
            <i class="fa-regular fa-user"></i>
          </div>
          <div class="nombre-prof">
            <h2>{{ profesorSeleccionado.Nombre }}</h2>
          </div>
        </div>
        <div class="agregar-reporte">
          <div class="titulo-agregar">
            <h2>Generar Reporte:</h2>
          </div>
          <div class="tipo-reporte">
            <label for="" class="espacio">Tipo de reporte:</label>
            <select class="input-field" [(ngModel)]="reporte.category">
              <option value="">...</option>
              <option value="1">Cambios de calificación</option>
              <option value="2">Cambios de fecha de examen</option>
              <option value="3">Reportes de integridad académica</option>
              <option value="4">Reporte disciplinar a profesor</option>
              <option value="5">Incidencia de pago a favor</option>
              <option value="6">Incidencia de pago en contra</option>
            </select>
          </div>
          <div class="descripcion-reporte">
            <label for="" class="espacio">Descripción:</label>
            <input
              type="text"
              placeholder="..."
              class="letra-placeholder"
              [(ngModel)]="reporte.description"
            />
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" (click)="agregarReporte()" class="boton">Agregar reporte</button>
        </div>
        <div class="ver-reportes">
          <div class="titulo-agregar">
            <h2>Reportes Pasados</h2>
            <table class="tabla-centro">
              <thead>
                <tr>
                  <th>Categoría</th>
                  <th>Descripción</th>
                  <th>Fecha de emisión</th>
                  <th>Emitido por</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let r of profesor_reportes">
                  <td>{{ r.category }}</td>
                  <td>{{ r.description }}</td>
                  <td>{{ r.date_added }}</td>
                  <td>{{ r.last_modified_by }}</td>
                  <!-- <td><button class="boton" (click)="abrirModal(prof)">Reportes</button ></td> -->
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="boton" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
